---
import type { Post } from "~/types";

import { fetchPosts, getRelatedPosts } from "~/utils/blog";

import Item from '~/components/tlo/widgets/Item.astro';
import Heading from "~/components/tlo/ui/Heading.astro";

export interface Props {
  post: Post;
}

const { post } = Astro.props;
const fetchedPosts = await fetchPosts();
const relatedPosts = post.tags ? getRelatedPosts(fetchedPosts, post.slug, post.tags) : [];

const isDark = false
const classes = { container: "pt-0 lg:pt-0 md:pt-0" }
---

<div class="tlo-related-posts">

  <!-- Heading -->
  <Heading title="Approximately Relevant" />

  <!-- Related Items -->
  <div class="tlo-related-items">
    {relatedPosts.map((post) => (
      <Item post={post} variant="short" />
    ))}
  </div>

</div>
