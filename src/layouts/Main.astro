---
// --------------
// Main Layout ==
// --------------

// Configuration
import { TLO } from "~/utils/config";

// TLO Components
import AboutLacking from '~/tlo/widgets/AboutLacking.astro';
import CategoryHeader from '~/tlo/widgets/CategoryHeader.astro';
import Footer from '~/tlo/widgets/Footer.astro';
import Header from '~/tlo/widgets/Header.astro';
import HtmlPage from '~/layouts/Html.astro';
import RecentPosts from '~/tlo/widgets/RecentPosts.astro';

// Navigation Data
import { headerData, footerData } from '~/navigation';

// Typescript
import type { MetaData } from '~/types';
export interface Props {
  metadata?: MetaData;
}

// Page Metadata
const { metadata } = Astro.props;
const homeCategory = TLO?.categories.home
---

<HtmlPage metadata={metadata}>

  <!-- Header -->
  <slot name="header">
    <Header {...headerData} isSticky showRssFeed />
  </slot>

  <!-- Main -->
  <main>

      <!-- Left Sidebar -->
      <!-- TODO: Clean up TW -->
      <div class="left-sidebar hidden md:block">
        <slot name="sidebar">
          <!-- Default Sidebar Content -->

          <!-- Category Header -->
          <CategoryHeader category={homeCategory} description={false} />

          <!-- Recent articles -->
          <RecentPosts />

          <!-- About lacking.org -->
          <AboutLacking />
        </slot>
      </div>

      <!-- Content -->
      <div class="content">
        <div class="tlo-box">
          <slot />
        </div>
      </div>

  </main>

  <!-- Footer -->
  <slot name="footer">
    <Footer {...footerData} />
  </slot>

</HtmlPage>
